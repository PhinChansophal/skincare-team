<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SkinCare</title>

  <!-- CSS FILES -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;700;900&display=swap"
    rel="stylesheet"
  />
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <link href="css/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/slick.css" />
  <link href="css/tooplate-little-fashion.css" rel="stylesheet" />

  <style>
    /* Navbar User Display Styles */
.d-none.d-lg-block {
    display: flex;
    align-items: center;
    gap: 15px;
}

#navbar-user-display {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-right: 10px;
    transition: all 0.3s ease;
}

#navbar-profile-img {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
}

#navbar-profile-img:hover {
    border-color: rgba(255, 255, 255, 0.5);
    transform: scale(1.05);
}

#navbar-user-email {
    color: white;
    font-size: 0.9rem;
    font-weight: 500;
    opacity: 0.9;
    transition: all 0.3s ease;
}

#navbar-user-email:hover {
    opacity: 1;
}

.bi-person.custom-icon, 
.bi-bag.custom-icon {
    font-size: 1.25rem;
    color: white;
    opacity: 0.8;
    transition: all 0.3s ease;
}

.bi-person.custom-icon:hover, 
.bi-bag.custom-icon:hover {
    opacity: 1;
    transform: translateY(-2px);
}

/* Responsive adjustments */
@media (max-width: 991.98px) {
    .d-none.d-lg-block {
        gap: 10px;
    }
    
    #navbar-user-display {
        gap: 8px;
    }
    
    #navbar-profile-img {
        width: 32px;
        height: 32px;
    }
    
    #navbar-user-email {
        font-size: 0.8rem;
    }
    
    .bi-person.custom-icon, 
    .bi-bag.custom-icon {
        font-size: 1.1rem;
    }
}

/* Animation for when user logs in */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}

#navbar-profile-img, 
#navbar-user-email {
    animation: fadeIn 0.5s ease-out forwards;
}
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <a class="navbar-brand" href="index.html">
        <strong><span>Skin</span>Care</strong>
      </a>

      <div class="d-lg-none">
        <a href="sign-in.html" class="bi-person custom-icon me-3"></a>
        <a href="product-detail.html" class="bi-bag custom-icon"></a>
      </div>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mx-auto">
          <li class="nav-item">
            <a class="nav-link active" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="about.html">Story</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="products.html">Products</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="faq.html">FAQs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="contact.html">Contact</a>
          </li>
        </ul>
        <div class="d-none d-lg-block">
            <div id="navbar-user-display">
              <img id="navbar-profile-img" src="" alt="Profile">
              <span id="navbar-user-email"></span>
            </div>
            <a href="sign-in.html" class="bi-person custom-icon me-3" id="sign-in-link"></a>
            <a href="product-detail.html" class="bi-bag custom-icon" > </a>
          </div>
      </div>
    </div>
  </nav>

  <section class="preloader">
    <div class="spinner">
      <span class="sk-inner-circle"></span>
    </div>
  </section>

  <main>
    <section class="sign-in-form section-padding">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto col-12">
            <h1 class="hero-title text-center mb-5">Sign Up</h1>

            <div class="social-login d-flex flex-column w-50 m-auto">
              <a href="#" class="btn custom-btn social-btn mb-4"
                ><i class="bi bi-google me-3"></i> Continue with Google</a
              >
              <a href="#" class="btn custom-btn social-btn"
                ><i class="bi bi-facebook me-3"></i> Continue with Facebook</a
              >
            </div>

            <div class="div-separator w-50 m-auto my-5"><span>or</span></div>

            <div class="row">
              <div class="col-lg-8 col-11 mx-auto">
                <form id="signup-form" role="form" novalidate>
                  <div class="form-floating">
                    <input
                      type="email"
                      name="email"
                      id="email"
                      pattern="[^ @]*@[^ @]*"
                      class="form-control"
                      placeholder="Email address"
                      required
                    />
                    <label for="email">Email address</label>
                    <div id="email-error" class="error-message">Please enter a valid email address</div>
                  </div>

                  <div class="form-floating my-4">
                    <input
                      type="password"
                      name="password"
                      id="password"
                      minlength="1"
                      class="form-control"
                      placeholder="Password"
                      required
                    />
                    <label for="password">Password</label>
                    <div id="password-error" class="error-message">Password must be at least 1 character</div>
                    <p class="text-center">
                      * Password can be simple, minimum 1 character
                    </p>
                  </div>

                  <div class="form-floating mb-4">
                    <input
                      type="password"
                      name="confirm_password"
                      id="confirm_password"
                      minlength="1"
                      class="form-control"
                      placeholder="Password"
                      required
                    />
                    <label for="confirm_password">Password Confirmation</label>
                    <div id="confirm-password-error" class="error-message">Passwords do not match</div>
                  </div>

                  <div class="form-floating mb-4">
                    <input
                      type="file"
                      name="profile_image"
                      id="profile_image"
                      class="form-control"
                      accept="image/*"
                      required
                    />
                    <label for="profile_image">Upload Profile Image</label>
                    <div id="image-error" class="error-message">Please upload a profile image</div>
                  </div>

                  <button
                    type="submit"
                    class="btn custom-btn form-control mt-4 mb-3"
                    id="submit-btn"
                  >
                    Create account
                  </button>

                  <div id="success-message" class="success-message">
                    Account created successfully! Redirecting...
                  </div>

                  <p class="text-center">
                    Already have an account? Please
                    <a href="sign-in.html">Sign In</a>
                  </p>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-10 me-auto mb-4">
          <h4 class="text-white mb-3">
            <a href="index.html">Skin</a>Care
          </h4>
          <p class="copyright-text text-muted mt-lg-5 mb-4 mb-lg-0">
            Copyright Â© 2022 <strong>SkinCare</strong>
          </p>
          <br />
          <p class="copyright-text">
            Designed by <a href="" target="_blank">A5</a>
          </p>
        </div>

        <div class="col-lg-5 col-8">
          <h5 class="text-white mb-3">Sitemap</h5>
          <ul class="footer-menu d-flex flex-wrap">
            <li class="footer-menu-item">
              <a href="about.html" class="footer-menu-link">Story</a>
            </li>
            <li class="footer-menu-item">
              <a href="products.html" class="footer-menu-link">Products</a>
            </li>
            <li class="footer-menu-item">
              <a href="#" class="footer-menu-link">Privacy policy</a>
            </li>
            <li class="footer-menu-item">
              <a href="faq.html" class="footer-menu-link">FAQs</a>
            </li>
            <li class="footer-menu-item">
              <a href="contact.html" class="footer-menu-link">Contact</a>
            </li>
          </ul>
        </div>

        <div class="col-lg-3 col-4">
          <h5 class="text-white mb-3">Social</h5>
          <ul class="social-icon">
            <li><a href="#" class="social-icon-link bi-youtube"></a></li>
            <li><a href="#" class="social-icon-link bi-whatsapp"></a></li>
            <li><a href="#" class="social-icon-link bi-instagram"></a></li>
            <li><a href="#" class="social-icon-link bi-skype"></a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <!-- JAVASCRIPT FILES -->
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/Headroom.js"></script>
  <script src="js/jQuery.headroom.js"></script>
  <script src="js/slick.min.js"></script>
  <script src="js/custom.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Check if user is already logged in and update navbar
      const profileImg = document.getElementById("navbar-profile-img");
      const userEmail = document.getElementById("navbar-user-email");
      const userDisplay = document.getElementById("navbar-user-display");
      const signInLink = document.getElementById("sign-in-link");

      const savedEmail = localStorage.getItem("userEmail");
      const savedImg = localStorage.getItem("userProfileImg");

      if (savedEmail && savedImg) {
        profileImg.src = savedImg;
        profileImg.style.display = "inline-block";
        userEmail.textContent = savedEmail;
        userEmail.style.display = "inline-block";

        signInLink.style.display = "none";
        userDisplay.style.display = "flex";
        userDisplay.style.alignItems = "center";
        userDisplay.style.gap = "8px";
      } else {
        profileImg.style.display = "none";
        userEmail.style.display = "none";
        userDisplay.style.display = "none";

        signInLink.style.display = "inline-block";
      }

      // Signup form handling
      const signupForm = document.getElementById("signup-form");
      const emailInput = document.getElementById("email");
      const passwordInput = document.getElementById("password");
      const confirmPasswordInput = document.getElementById("confirm_password");
      const profileImageInput = document.getElementById("profile_image");
      const successMessage = document.getElementById("success-message");

      // Error elements
      const emailError = document.getElementById("email-error");
      const passwordError = document.getElementById("password-error");
      const confirmPasswordError = document.getElementById("confirm-password-error");
      const imageError = document.getElementById("image-error");

      // Validate email format
      function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
      }

      // Form submission handler
      signupForm.addEventListener("submit", function(e) {
        e.preventDefault();
        
        // Reset error messages
        emailError.style.display = "none";
        passwordError.style.display = "none";
        confirmPasswordError.style.display = "none";
        imageError.style.display = "none";
        
        let isValid = true;
        
        // Validate email
        if (!validateEmail(emailInput.value)) {
          emailError.style.display = "block";
          isValid = false;
        }
        
        // Validate password
        if (passwordInput.value.length < 1) {
          passwordError.style.display = "block";
          isValid = false;
        }
        
        // Validate password confirmation
        if (passwordInput.value !== confirmPasswordInput.value) {
          confirmPasswordError.style.display = "block";
          isValid = false;
        }
        
        // Validate profile image
        if (!profileImageInput.files || profileImageInput.files.length === 0) {
          imageError.style.display = "block";
          isValid = false;
        }
        
        if (isValid) {
          // Process the form
          const email = emailInput.value;
          const password = passwordInput.value;
          const file = profileImageInput.files[0];
          
          // Read the image file and convert to base64
          const reader = new FileReader();
          reader.onload = function(event) {
            const imageData = event.target.result;
            
            // Store user data in localStorage
            localStorage.setItem("userEmail", email);
            localStorage.setItem("userProfileImg", imageData);
            
            // Show success message
            successMessage.style.display = "block";
            
            // Update navbar immediately
            profileImg.src = imageData;
            profileImg.style.display = "inline-block";
            userEmail.textContent = email;
            userEmail.style.display = "inline-block";
            signInLink.style.display = "none";
            userDisplay.style.display = "flex";
            
            // Redirect after 2 seconds
            setTimeout(() => {
              window.location.href = "index.html";
            }, 2000);
          };
          reader.readAsDataURL(file);
        }
      });

      // Real-time validation
      emailInput.addEventListener("input", function() {
        if (validateEmail(this.value)) {
          emailError.style.display = "none";
        }
      });
      
      passwordInput.addEventListener("input", function() {
        if (this.value.length >= 1) {
          passwordError.style.display = "none";
        }
      });
      
      confirmPasswordInput.addEventListener("input", function() {
        if (this.value === passwordInput.value) {
          confirmPasswordError.style.display = "none";
        }
      });
      
      profileImageInput.addEventListener("change", function() {
        if (this.files && this.files.length > 0) {
          imageError.style.display = "none";
        }
      });
    });
  </script>
</body>
</html>